{
   "$schema":"http://json-schema.org/draft-04/hyper-schema",
   "id":"/schemata/artist",
   "title":"Artist",
   "description":"Artist schema",
   "stability":"prototype",
   //"strictProperties":true,
   // "required":[
   //    "links"
   // ],
   "type":[
      "object"
   ],
   "definitions":{
      "id":{
         "description":"unique id of artist",
         "readOnly":true,
         "type":[
            "integer"
         ]
      },
      "related_ids":{
         "description":"Comma Separated values of related ids",
         "type":"string"
      },
      "artist_properties":{
         "description":"Properties of artist",
         "type":[
            "object"
         ],
         "properties":{
            "id":{
               "type":"integer"
            },
            "title":{
               "type":"string"
            },
            "country":{
               "type":"string"
            },
            "genre_id":{
               "type":"integer"
            },
            "created_at":{
               "type":"string",
               "format":"date-time"
            },
            "updated_at":{
               "type":"string",
               "format":"date-time"
            }
         }
      },
      "genre_properties":{
         "description":"Properties of genre",
         "type":[
            "object"
         ],
         "properties":{
            "id":{
               "type":"integer"
            },
            "title":{
               "type":"string"
            },
            "created_at":{
               "type":"string",
               "format":"date-time"
            },
            "updated_at":{
               "type":"string",
               "format":"date-time"
            }
         }
      },
      "identity":{
         "anyOf":[
            {
               "$ref":"/schemata/artist#/definitions/id"
            }
         ]
      }
   },
   "properties":{
      "class":{
         "type":"array",
         "items":{
            "type":"string",
            "enum":[
               "artist"
            ]
         }
      },
      "properties":{
         "$ref":"/schemata/artist#/definitions/artist_properties"
      },
      "actions":{
         "type":"array",
         "items":[
            {
               "type":"object",
               "properties":{
                  "name":{
                     "type":"string",
                     "enum":[
                        "update-artist"
                     ]
                  },
                  "title":{
                     "type":"string",
                     "enum":[
                        "Update Artist"
                     ]
                  },
                  "method":{
                     "type":"string",
                     "enum":[
                        "PATCH"
                     ]
                  },
                  "type":{
                     "type":"string",
                     "enum":[
                        "application/x-www-form-urlencoded"
                     ]
                  },
                  "href":{
                     "type":"string",
                     "format":"uri"
                  },
                  "fields":{
                     "type":"array",
                     "items":[
                        {
                           "name":{
                              "type":"string",
                              "enum":[
                                 "artist[title]"
                              ]
                           },
                           "type":{
                              "type":"string",
                              "enum":[
                                 "text"
                              ]
                           }
                        },
                        {
                           "name":{
                              "type":"string",
                              "enum":[
                                 "artist[country]"
                              ]
                           },
                           "type":{
                              "type":"string",
                              "enum":[
                                 "text"
                              ]
                           }
                        },
                        {
                           "name":{
                              "type":"string",
                              "enum":[
                                 "artist[genre_id]"
                              ]
                           },
                           "type":{
                              "type":"string",
                              "enum":[
                                 "number"
                              ]
                           }
                        }
                     ]
                  }
               }
            },
            {
               "type":"object",
               "properties":{
                  "name":{
                     "type":"string",
                     "enum":[
                        "delete-artist"
                     ]
                  },
                  "title":{
                     "type":"string",
                     "enum":[
                        "Delete Artist"
                     ]
                  },
                  "method":{
                     "type":"string",
                     "enum":[
                        "DELETE"
                     ]
                  },
                  "type":{
                     "type":"string",
                     "enum":[
                        "application/x-www-form-urlencoded"
                     ]
                  },
                  "href":{
                     "type":"string",
                     "format":"uri"
                  }
               }
            }
         ]
      },
      "entities":{
        "type": "array",
         "minItems": 0,
         "anyOf":[
            {
               "type":"array",
               "properties":{
                  "class":{
                     "type":"array",
                     "items":{
                        "type":"string",
                        "enum":[
                           "genre"
                        ]
                     }
                  },
                  "rel":{
                     "type":"array",
                     "items":{
                        "type":"string",
                        "enum":[
                           "related"
                        ]
                     }
                  },
                  "properties":{
                     "id":{
                        "type":"integer"
                     },
                     "title":{
                        "type":"string"
                     },
                     "created_at":{
                        "type":"string",
                        "format":"date-time"
                     },
                     "updated_at":{
                        "type":"string",
                        "format":"date-time"
                     }
                  },
                  "links":{
                     "type":"array",
                     "items":[
                        {
                           "rel":{
                              "type":"array",
                              "items":{
                                 "type":"string",
                                 "enum":[
                                    "collection"
                                 ]
                              }
                           },
                           "href":{
                              "type":"string",
                              "format":"uri"
                           }
                        }
                     ]
                  }
               }
            },
            {
               "type":"object",
               "properties":{
                  "class":{
                     "type":"array",
                     "items":{
                        "type":"string",
                        "enum":[
                           "albums"
                        ]
                     }
                  },
                  "href":{
                     "type":"string",
                     "format":"uri"
                  },
                  "rel":{
                     "type":"array",
                     "items":{
                        "type":"string",
                        "enum":[
                           "related"
                        ]
                     }
                  }
               }
            }
         ]
      },
      "links":{
         "type":"array",
         "items":[
            {
               "href":{
                  "type":"string",
                  "format":"uri"
               },
               "rel":{
                  "type":"array",
                  "items":{
                     "type":"string"
                  }
               }
            },
            {
               "href":{
                  "type":"string",
                  "format":"uri"
               },
               "rel":{
                  "type":"array",
                  "items":{
                     "type":"string"
                  }
               }
            }
         ]
      }
   }
}