swagger: "2.0"
info:
  description: |
    This is MyMusic API.
    Please get an Authorization Token and include it in authentication field before you make any requests.
  version: "1.0.0"
  title: MyMusic
  termsOfService: http://helloreverb.com/terms/
  contact:
    name: Spiros Kabasakalis
    email: kabasakalis@gmail.com
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
host: api.app.me:3000
basePath: /v1
schemes:
  - http
consumes:
  - application/json
produces:
  - application/json
  - application/vnd.siren+json
paths:
  /genres:
    get:
      tags:
        - genre
      summary: Finds all genres
      description: Gets all genres,paginated result.
      operationId: getAllGenres
      parameters:
        - in: query
          name: id
          description: Filter by ids
          required: false
          type: array
          items:
            type: string
          collectionFormat: multi
      security:
       - json_token: []
      responses:
        "200":
          description: Successful operation
          schema:
            type: array
            items:
              $ref: "#/definitions/Genre"
        "404":
          description: Not Found
        "401":
          description: Unauthorized
        "500":
          description: Server Error
    post:
      tags:
        - genre
      summary: Add a new genre
      description: Only Admins and SuperAdmins can create genres
      operationId: addGenre
      parameters:
        - in: body
          name: body
          description: Genre to add
          required: false
          schema:
            $ref: "#/definitions/Genre"
      security:
       - json_token: []
      responses:
        "405":
          description: Invalid input
        "401":
          description: Unauthorized

  /genres/{genreId}:
    get:
      tags:
        - genre
      summary: Find genre by ID
      description: Returns a genre
      operationId: getgenreById
      parameters:
        - in: path
          name: genreId
          description: ID of genre that needs to be fetched
          required: true
          type: integer
          format: int64
      security:
       - json_token: []
      responses:
        "404":
          description: genre not found
        "200":
          description: successful operation
          schema:
            $ref: "#/definitions/Genre"
        "400":
          description: Invalid ID supplied
    put:
      tags:
        - genre
      summary: Updates an genre
      description: ""
      operationId: updategenre
      consumes:
        - application/x-www-form-urlencoded
      parameters:
        - in: path
          name: genreId
          description: ID of genre to be updated
          required: true
          type: string
        - in: body
          name: body
          description: Updated attributes for genre.
          required: false
          schema:
            $ref: "#/definitions/Genre"
      responses:
        "405":
          description: Invalid input
        "404":
          description: genre not found
        "200":
          description: successful operation
          schema:
            $ref: "#/definitions/Genre"
        "400":
          description: Invalid ID supplied
      security:
        - json_token: []
    delete:
      tags:
        - genre
      summary: Deletes an genre
      description: ""
      operationId: deleteGenre
      parameters:
        - in: path
          name: genreId
          description: genre id to delete
          required: true
          type: integer
          format: int64
      responses:
        "400":
          description: Invalid genre value
        "204":
          description: No Content. Successfully Deleted.
        "404":
          description: Genre not found
      security:
        - json_token: []
securityDefinitions:
  json_token:
    type: apiKey
    name: Authorization
    in: header
definitions:
  Auth:
    type: object
    properties:
      auth:
        type: object
        properties:
          email:
            type: string
          password:
            type: string
  User:
    type: object
    properties:
      id:
        type: integer
        format: int64
      name:
        type: string
      email:
        type: string
      password:
        type: string
      password_confirmation:
        type: string
      role:
        type: integer
        format: int32
  User:
    type: object
    properties:
      name:
        type: string
        description: username
      email:
        type: string
        description: email
      password:
        type: string
        description: password (at least 8 characters)
      password_confirmation:
        type: string
        description: password confirmation
      role:
        type: string
        enum: ['user','admin','superadmin']
      playlists_attributes:
        description: playlists that this track belongs to
        type: array
        items:
          $ref: "#/definitions/Playlist"

  Genre:
    type: object
    properties:
      genre:
        type: object
        properties:
          title:
            type: string
            description: Name of Genre to update.
  GenreNested:
    type: object
    properties:
      title:
        type: string
        description: Name of Genre to update.
  Artist:
    type: object
    properties:
      artist:
        type: object
        properties:
          genre_id:
            type: integer
            format: int64
          title:
            type: string
            example: Myrath
            description: Name of band or genre.
          country:
            type: string
            example: USA
            description: artist's country of origin.
          genre_attributes:
            $ref: "#/definitions/Genre"
          album_attributes:
            description: artist's albums
            type: array
            items:
              $ref: "#/definitions/AlbumNested"
  ArtistNested:
    type: object
    properties:
      genre_id:
        type: integer
        format: int64
      title:
        type: string
        example: Myrath
        description: Name of band or artist.
      country:
        type: string
        example: USA
        description: artist's country of origin.
      album_attributes:
        $ref: "#/definitions/Album"
  Album:
    type: object
    properties:
      genre:
        type: object
        properties:
          artist_id:
            type: integer
            format: int64
          title:
            type: string
          year:
            type: integer
            format: int32
          tracks_attributes:
            description: Tracks on this genre
            type: array
            items:
              $ref: "#/definitions/TrackNested"
  AlbumNested:
    type: object
    properties:
      title:
        type: string
      year:
        type: integer
        format: int32
  Track:
    type: object
    properties:
      track:
        type: object
        properties:
          title:
            type: string
          time:
            type: string
          album_id:
            type: integer
            format: int64
          playlists_attributes:
            description: playlists that this track belongs to
            type: array
            items:
              $ref: "#/definitions/Playlist"
  TrackNested:
    type: object
    properties:
      title:
        type: string
      time:
        type: string
  Playlist:
    type: object
    properties:
      playlist:
        type: object
        properties:
          title:
            type: string
          user_id:
            type: integer
            format: int64
          tracks_attributes:
            description: tracks in this playlist
            type: array
            items:
              $ref: "#/definitions/Track"
          albums_attributes:
            description: albums in this playlist
            type: array
            items:
              $ref: "#/definitions/Album"




